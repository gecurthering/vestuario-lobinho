<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Hello World</title>
</head>
  <script src="pixi.min.js"></script>
<body>
  <script type="text/javascript">
    let type = "WebGL"
    if(!PIXI.utils.isWebGLSupported()){
      type = "canvas"
    }

  /**
* This is the default playground.
* You should see a bunny spinning in the right preview pane.
* Feel free to use this as a starting point for you own playground!
*/

//Create a Pixi Application
let app = new PIXI.Application({
    width: window.innerWidth,
    height: window.innerHeight,
    backgroundColor: 0xF0F0A0
    });
document.body.appendChild(app.view);

app.loader
    .add('meiofigure', 'https://vsolymossy.github.io/fluffy-guacamole/meiofigure.png')
    .add('di1', 'https://vsolymossy.github.io/fluffy-guacamole/D_CT_1.png')
    .load(setup);

function setup() {
    let meiofigure = new PIXI.Sprite(app.loader.resources.meiofigure.texture);
    meiofigure.anchor.set(0.5);
    meiofigure.x = app.renderer.width / 2;
    meiofigure.y = app.renderer.height / 2;
    let di1 = new PIXI.Sprite(app.loader.resources.di1.texture);
    di1.scale.set(0.1);
    di1.anchor.set(0.5);
    di1.interactive = true;
    di1.cursor = 'grab';
    di1.x=100;
    di1.y=100;
    di1
        .on('pointerdown', onDragStart)
        .on('pointerup', onDragEnd)
        .on('pointerupoutside', onDragEnd)
        .on('pointermove', onDragMove);
    // move the sprite to its designated position
//    di1.x = x;
//    di1.y = y;
    
// Ficará por cima o sprite adicionado por último
app.stage.addChild(meiofigure);
app.stage.addChild(di1);
}

function onDragStart(event) {
    // store a reference to the data
    // the reason for this is because of multitouch
    // we want to track the movement of this particular touch
    this.data = event.data;
    this.alpha = 0.5;
    this.dragging = true;
}

function onDragEnd() {
    this.alpha = 1;
    this.dragging = false;
    // set the interaction data to null
    this.data = null;
}

function onDragMove() {
    if (this.dragging) {
        const newPosition = this.data.getLocalPosition(this.parent);
        this.x = newPosition.x;
        this.y = newPosition.y;
    }
}
    
</script>
</body>
</html>
